(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d8014"],{"78da":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{staticClass:"headerCard",attrs:{"dis-hover":!0}},[a("Steps",{attrs:{current:t.current}},[a("Step",{attrs:{title:"选择异常记录信息",icon:"md-arrow-dropdown-circle"}}),a("Step",{attrs:{title:"选择解决方案",icon:"md-arrow-dropdown-circle"}}),a("Step",{attrs:{title:"提交反馈",icon:"ios-mail"}}),a("Step",{attrs:{title:"完成",icon:"ios-checkmark-circle"}})],1)],1),a("Card",{directives:[{name:"show",rawName:"v-show",value:0===t.current,expression:"current === 0"}],attrs:{"dis-hover":!0}},[t._v("\n    点击前往\n    "),a("a",{on:{click:function(e){return t.handleGo("/alarm/record")}}},[t._v("异常记录页面")]),t._v("选择异常记录\n  ")]),a("Card",{directives:[{name:"show",rawName:"v-show",value:1===t.current,expression:"current === 1"}],attrs:{"dis-hover":!0}},[a("tables",{ref:"tables",attrs:{border:"","disabled-hover":!0,editable:"",searchable:"","search-place":"top",columns:t.alarmCodesColumns},model:{value:t.alarmCodesTableData,callback:function(e){t.alarmCodesTableData=e},expression:"alarmCodesTableData"}})],1),a("Card",{directives:[{name:"show",rawName:"v-show",value:2===t.current,expression:"current === 2"}],attrs:{"dis-hover":!0}},[a("Divider",{attrs:{orientation:"left"}},[t._v("异常记录")]),a("Table",{attrs:{columns:t.record,data:t.recordData}}),a("Divider",{attrs:{orientation:"left"}},[t._v("组合码记录")]),a("Table",{attrs:{columns:t.group,data:t.groupData}}),a("Divider",{attrs:{orientation:"left"}},[t._v("解决方案")]),a("Table",{attrs:{columns:t.solution,data:t.solutionData}}),a("Select",{staticStyle:{margin:"10px 0"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("Option",{attrs:{value:0}},[t._v("失败")]),a("Option",{attrs:{value:1}},[t._v("成功")]),a("Option",{attrs:{value:2}},[t._v("处理中")])],1),a("Input",{attrs:{type:"textarea",rows:4,placeholder:"反馈信息"},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}}),a("Button",{staticStyle:{margin:"10px 0"},attrs:{type:"success"},on:{click:t.handleSubmit}},[t._v("提交反馈")])],1),a("Card",{directives:[{name:"show",rawName:"v-show",value:3===t.current,expression:"current === 3"}],attrs:{"dis-hover":!0}},[t._v("\n    提交成功..\n    "),a("a",{on:{click:t.handleReset}},[t._v("继续提交")])])],1)},s=[],o=(a("96cf"),a("3b8d")),i=a("fa69"),n=a("9e04"),l=a("365c"),c={components:{Tables:i["a"]},data:function(){var t=this;return{status:0,msg:"",current:this.$store.state.alarm.current,recordData:[],record:[{title:"异常码名称",key:"codeName"},{title:"设备名称",key:"macName"},{title:"监测点名称",key:"iopName"},{title:"异常码",key:"code"},{title:"异常消息",key:"codeMsg"},{title:"开始时间",key:"sDate"},{title:"持续时间",key:"duration"},{title:"严重级别",key:"level"}],groupData:[],group:[{title:"组合码名称",key:"codeName"},{title:"监测点组名称",key:"iopName"},{title:"异常码",key:"code"},{title:"异常消息",key:"codeMsg"},{title:"开始时间",key:"sDate"},{title:"持续时间",key:"duration"},{title:"严重级别",key:"level"}],solution:[{title:"名称",key:"name"},{title:"描述",key:"detail"},{title:"适用异常码/组合码",key:"list"}],solutionData:[],alarmCodesTableData:[],alarmCodesColumns:[{title:"设备名称",key:"macName"},{title:"监测点名称",key:"iopName"},{title:"异常码",key:"code"},{title:"异常码名称",key:"codeName"},{title:"异常消息",key:"codeMsg"},{title:"开始时间",key:"sDate"},{title:"持续时间",key:"duration"},{title:"严重级别",key:"level"},{title:"异常记录状态",key:"status",render:function(t,e){var a=e.row,r=0===a.status?"default":2===a.status?"primary":"success",s=0===a.status?"未处理":2===a.status?"处理中":"已处理";return t("Tag",{props:{type:"dot",color:r},style:{marginLeft:"-5px"}},s)}},{title:"操作",key:"handle",searchable:!1,button:[function(e,a,r){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginLeft:"-10px"},on:{click:function(){t.handleGo("/alarm/solution")}}},"选择解决方案")])}]}]}},watch:{current:function(t,e){this.current=t}},methods:{handleSubmit:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,a,r,s,o,i,c,u,d,m,h;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=!1,a=this,this.recordData.length>0?(r=this.solutionData[0].id,s=this.recordData[0].code,o=this.recordData[0].sDate,i=this.recordData[0].id,c=this.status,u=this.msg,d=this.recordData[0].macName):(r=this.solutionData[0].id,s=this.groupData[0].code,o=this.groupData[0].sDate,i=this.groupData[0].id,c=this.status,u=this.msg,e=!0),t.prev=3,!e){t.next=13;break}return t.next=7,Object(n["c"])({solution:r,record:i,sDate:o,code:s,msg:u,status:c});case 7:m=t.sent,1===m.data.result?a.$Message.error(m.data.msg):a.$Message.success(m.data.msg),a.$store.commit("setCurrent",3),a.current=3,t.next=20;break;case 13:return t.next=15,Object(n["d"])({solution:r,record:i,sDate:o,code:s,msg:u,status:c,macName:d});case 15:h=t.sent,console.log("+++"),1===h.data.result?a.$Message.error(h.data.msg):a.$Message.success(h.data.msg),a.$store.commit("setCurrent",3),a.current=3;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](3),void 0!==t.t0.response?Object(l["a"])(t.t0.response.status):Object(l["a"])(1);case 25:case"end":return t.stop()}},t,this,[[3,22]])}));function e(){return t.apply(this,arguments)}return e}(),handleGo:function(t){this.$router.push(t)},handleReset:function(){this.$store.commit("setCurrent",0),this.current=0}},beforeMount:function(){1===this.current&&(this.alarmCodesTableData=[],this.alarmCodesTableData.push(this.$store.state.alarm.alarmRecord)),this.solutionData.push(this.$store.state.alarm.solution),this.recordData.push(this.$store.state.alarm.alarmRecord),this.groupData.push(this.$store.state.alarm.alarmRecordGroup)}},u=c,d=a("2877"),m=Object(d["a"])(u,r,s,!1,null,"dc5993a6",null);e["default"]=m.exports}}]);