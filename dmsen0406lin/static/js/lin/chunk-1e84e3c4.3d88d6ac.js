(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e84e3c4"],{2615:function(e,t,n){},5968:function(e,t,n){"use strict";var o=n("7762"),a=n.n(o);a.a},7762:function(e,t,n){},"9da5":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Card",{staticStyle:{height:"100%",width:"100%",overflow:"hidden"},attrs:{shadow:""}},[n("div",{staticClass:"department-outer"},[n("div",{staticClass:"zoom-box"},[n("zoom-controller",{attrs:{min:20,max:200},model:{value:e.zoom,callback:function(t){e.zoom=t},expression:"zoom"}})],1),n("div",{staticClass:"view-box"},[e.data?n("org-view",{attrs:{data:e.data,"zoom-handled":e.zoomHandled},on:{"on-menu-click":e.handleMenuClick}}):e._e()],1)])])},a=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"dragWrapper",staticClass:"org-tree-drag-wrapper",on:{mousedown:e.mousedownView,contextmenu:e.handleDocumentContextmenu}},[n("div",{staticClass:"org-tree-wrapper",style:e.orgTreeStyle},[e.data?n("v-org-tree",{attrs:{data:e.data,"node-render":e.nodeRender,"expand-all":!0,collapsable:""},on:{"on-node-click":e.handleNodeClick}}):e._e()],1)])},r=[],s=(n("c5f6"),n("90de")),l=[{key:"edit",label:"编辑部门"},{key:"detail",label:"查看部门"},{key:"new",label:"新增子部门"},{key:"delete",label:"删除部门"}],c={name:"OrgView",props:{zoomHandled:{type:Number,default:1},data:Object},data:function(){return{currentContextMenuId:"",orgTreeOffsetLeft:0,orgTreeOffsetTop:0,initPageX:0,initPageY:0,oldMarginLeft:0,oldMarginTop:0,canMove:!1}},computed:{orgTreeStyle:function(){return{transform:"translate(-50%, -50%) scale(".concat(this.zoomHandled,", ").concat(this.zoomHandled,")"),marginLeft:"".concat(this.orgTreeOffsetLeft,"px"),marginTop:"".concat(this.orgTreeOffsetTop,"px")}}},methods:{handleNodeClick:function(e,t,n){n()},closeMenu:function(){this.currentContextMenuId=""},getBgColor:function(e){return this.currentContextMenuId===e.id?e.isRoot?"#0d7fe8":"#5d6c7b":""},nodeRender:function(e,t){return e("div",{class:["custom-org-node",t.children&&t.children.length?"has-children-label":""],on:{mousedown:function(e){return e.stopPropagation()},contextmenu:this.contextmenu.bind(this,t)}},[t.label,e("dropdown",{attrs:{trigger:"custom",visible:this.currentContextMenuId===t.id},class:"context-menu",nativeOn:{click:this.handleDropdownClick},on:{"on-click":this.handleContextMenuClick.bind(this,t)},style:{transform:"scale(".concat(1/this.zoomHandled,", ").concat(1/this.zoomHandled,")")}},[e("dropdown-menu",{slot:"list"},[l.map(function(t){return e("dropdown-item",{attrs:{name:t.key}},[t.label])})])])])},contextmenu:function(e,t){var n=t||window.event;n.preventDefault?n.preventDefault():n.returnValue=!1,this.currentContextMenuId=e.id},setDepartmentData:function(e){e.isRoot=!0,this.departmentData=e},mousedownView:function(e){this.canMove=!0,this.initPageX=e.pageX,this.initPageY=e.pageY,this.oldMarginLeft=this.orgTreeOffsetLeft,this.oldMarginTop=this.orgTreeOffsetTop,Object(s["f"])(document,"mousemove",this.mousemoveView),Object(s["f"])(document,"mouseup",this.mouseupView)},mousemoveView:function(e){if(this.canMove){var t=e.pageX,n=e.pageY;this.orgTreeOffsetLeft=this.oldMarginLeft+t-this.initPageX,this.orgTreeOffsetTop=this.oldMarginTop+n-this.initPageY}},mouseupView:function(){this.canMove=!1,Object(s["e"])(document,"mousemove",this.mousemoveView),Object(s["e"])(document,"mouseup",this.mouseupView)},handleDropdownClick:function(e){e.stopPropagation()},handleDocumentContextmenu:function(){this.canMove=!1},handleContextMenuClick:function(e,t){this.$emit("on-menu-click",{data:e,key:t}),setTimeout(this.closeMenu(),3e3)}},mounted:function(){Object(s["f"])(document,"contextmenu",this.handleDocumentContextmenu)},beforeDestroy:function(){Object(s["e"])(document,"contextmenu",this.handleDocumentContextmenu)}},u=c,d=n("2877"),m=Object(d["a"])(u,i,r,!1,null,null,null),f=m.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"zoom-wrapper"},[n("button",{staticClass:"zoom-button",on:{click:function(t){return e.scale("down")}}},[n("Icon",{attrs:{type:"md-remove",size:14,color:"#fff"}})],1),n("span",{staticClass:"zoom-number"},[e._v(e._s(e.value)+"%")]),n("button",{staticClass:"zoom-button",on:{click:function(t){return e.scale("up")}}},[n("Icon",{attrs:{type:"md-add",size:14,color:"#fff"}})],1)])},p=[],b={name:"ZoomController",props:{value:{type:Number,default:100},step:{type:Number,default:20},min:{type:Number,default:10},max:{type:Number,default:200}},methods:{scale:function(e){var t=this.value+("down"===e?-this.step:this.step);t<this.min&&"down"===e||t>this.max&&"up"===e||this.$emit("input",t)}}},g=b,v=(n("5968"),Object(d["a"])(g,h,p,!1,null,null,null)),w=v.exports,C=(n("7e1e"),{edit:"编辑",detail:"查看",new:"新增",delete:"删除"}),x={name:"org_tree_page",components:{OrgView:f,ZoomController:w},data:function(){return{data:{id:0,label:"真·公司",children:[{id:2,label:"产品研发部",children:[{id:9,label:"设计"},{id:10,label:"产品经理"}]},{id:3,label:"项目开发",children:[{id:7,label:"前端开发",children:[{id:7,label:"曾·程序猿(我)"}]},{id:8,label:"后端开发",children:[{id:9,label:"曾·程序猿(我)"}]}]},{id:4,label:"财务部"},{id:11,label:"人事部"}]},zoom:100}},computed:{zoomHandled:function(){return this.zoom/100}},methods:{setDepartmentData:function(e){return e.isRoot=!0,e},handleMenuClick:function(e){var t=e.data,n=e.key;this.$Message.success({duration:5,content:"点击了《".concat(t.label,"》节点的'").concat(C[n],"'菜单")})},getDepartmentData:function(){}},mounted:function(){this.getDepartmentData()}},k=x,M=(n("cf66"),Object(d["a"])(k,o,a,!1,null,null,null));t["default"]=M.exports},cf66:function(e,t,n){"use strict";var o=n("2615"),a=n.n(o);a.a}}]);