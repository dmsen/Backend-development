(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36f3f0fb"],{"0b4a":function(e,t,n){"use strict";var a=n("2363"),r=n.n(a);r.a},2363:function(e,t,n){},"42c2":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return s}),n.d(t,"h",function(){return u}),n.d(t,"i",function(){return m}),n.d(t,"f",function(){return c}),n.d(t,"g",function(){return l}),n.d(t,"e",function(){return p});n("7f7f");var a=n("66df"),r=function(e){var t=e.macId,n=e.gwId,r=(e.iop,e.name),o=e.minRange,i=e.maxRange,s=e.aline,u=e.computedWay;return a["a"].request({url:"gwIopMappingConfig/add",data:{machineId:t,gwId:n,physicalName:r,minLC:o,maxLC:i,aline:s,method:u},method:"post"})},o=function(e){var t=e.id,n=e.gwId,r=e.macId,o=(e.name,e.minRange),i=e.maxRange,s=e.aline,u=e.computedWay;return a["a"].request({url:"gwIopMappingConfig/mod",data:{configId:t,machineId:r,gwId:n,minLC:o,maxLC:i,aline:s,method:u},method:"put"})},i=function(e){var t=e.id;return a["a"].request({url:"gwIopMappingConfig/del",method:"delete",data:{configId:t}})},s=function(e){return a["a"].request({url:"/gwIopMappingConfig/gwIopMappingConfigs",method:"post",data:{sendPage:e}})},u=function(){return a["a"].request({url:"/gwIop/gateways/notUsed",method:"get"})},m=function(e){var t=e.gw;return a["a"].request({url:"/gwIop/iops/notUsed/"+t,method:"get"})},c=function(){return a["a"].request({url:"/iopGroup/iopGroups",method:"get"})},l=function(e){var t=e.id;return a["a"].request({url:"/iopGroup/iops/"+t,method:"get"})},p=function(e){var t=e.id;return a["a"].request({url:"machineIdIOP/get",method:"post",data:{machineId:t}})}},"56e7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Card",{attrs:{"dis-hover":!0}},[n("tables",{ref:"tables",attrs:{border:"","disabled-hover":!0,editable:"",searchable:"","search-place":"top",columns:e.columns},on:{"on-delete":e.handleDelete},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}}),n("Rate",{attrs:{value:1,count:1,character:"此页面暂仅供参考"}}),n("Button",{staticStyle:{margin:"10px 0"},attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出为Csv文件")]),n("Button",{staticStyle:{margin:"10px 0 10px 5px"},attrs:{type:"default"},on:{click:e.showAddCodeGroup}},[e._v("增加组合码")]),e.handleCodeGroup?n("Card",{attrs:{"dis-hover":!0}},[n("Row",[n("i-col",{attrs:{span:"17"}},[n("Form",{ref:"formItem",staticClass:"form",attrs:{model:e.formItem,"label-width":100}},[n("FormItem",{attrs:{label:"组合码名称"}},[n("Input",{staticStyle:{width:"auto"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1),n("FormItem",{attrs:{label:"选择监测点组"}},[n("Select",{staticStyle:{width:"auto"},on:{"on-change":e.handleChooseIopGroup},model:{value:e.formItem.id,callback:function(t){e.$set(e.formItem,"id",t)},expression:"formItem.id"}},e._l(e.formItem.iopList,function(t,a){return n("Option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1),e._l(e.formItem.item,function(t){return n("FormItem",{key:t.id,attrs:{label:t.name}},[n("Select",{directives:[{name:"show",rawName:"v-show",value:e.formItem.id,expression:"formItem.id"}],staticStyle:{width:"auto"},attrs:{multiple:""},model:{value:t.iop,callback:function(n){e.$set(t,"iop",n)},expression:"it.iop"}},e._l(t.iops,function(t,a){return n("Option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1)}),n("FormItem",{attrs:{label:"异常消息"}},[n("Input",{staticStyle:{width:"auto"},model:{value:e.formItem.msg,callback:function(t){e.$set(e.formItem,"msg",t)},expression:"formItem.msg"}})],1),n("FormItem",{attrs:{label:"异常等级"}},[n("Select",{staticStyle:{width:"auto"},model:{value:e.formItem.level,callback:function(t){e.$set(e.formItem,"level",t)},expression:"formItem.level"}},[n("Option",{attrs:{value:1}},[e._v("1")]),n("Option",{attrs:{value:2}},[e._v("2")]),n("Option",{attrs:{value:3}},[e._v("3")])],1)],1),n("FormItem",{attrs:{label:"时延"}},[n("Input",{staticStyle:{width:"auto"},model:{value:e.formItem.timeLimit,callback:function(t){e.$set(e.formItem,"timeLimit",t)},expression:"formItem.timeLimit"}})],1),n("Button",{staticStyle:{margin:"10px 0 10px 100px"},attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确认提交")]),n("Button",{staticStyle:{margin:"10px 0 10px 5px"},attrs:{type:"default"},on:{click:e.handleCancel}},[e._v("取消")])],2)],1)],1)],1):e._e()],1)},r=[],o=(n("7f7f"),n("96cf"),n("3b8d")),i=n("fa69"),s=n("9e04"),u=n("42c2"),m=n("365c"),c={components:{Tables:i["a"]},data:function(){return{handleCodeGroup:!1,formItem:{isAdd:!0,name:"",id:"",iops:[],iopList:[],codeList:[],item:[],msg:"",level:"",timeLimit:""},columns:[{title:"组合码",key:"code"},{title:"组合码名称",key:"name"},{title:"监控点组名称",key:"iopName"},{title:"异常消息",key:"msg"},{title:"异常级别",key:"level"},{title:"时延",key:"timeLimit"},{title:"操作",key:"handle",searchable:!1,button:[function(e,t,n){return e("div",[e("Poptip",{props:{confirm:!0,title:"你确定要删除吗?"},style:{marginLeft:"-5px"},on:{"on-ok":function(){n.$emit("on-delete",t),n.$emit("input",t.tableData.filter(function(e,n){return n!==t.row.initRowIndex}))}}},[e("Button",{props:{type:"error",size:"small"}},"删除")])])}]}],tableData:[]}},methods:{handleChooseIopGroup:function(){this.getIopsByGroup(this.formItem.id)},getIopsByGroup:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,o,i,c,l,p,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u["g"])({id:t});case 3:n=e.sent,a=n.data.msg,this.formItem.item=[],r=0,o=a.length;case 7:if(!(r<o)){e.next=18;break}return this.formItem.item.push({id:a[r].configId,name:a[r].machineName+a[r].physicalName,iops:[],iop:[]}),i=a[r].configId,e.next=12,Object(s["k"])({id:i});case 12:for(c=e.sent,l=c.data.msg,p=0,d=l.length;p<d;p++)this.formItem.item[r].iops.push({id:l[p].id,name:l[p].alarmName});case 15:r++,e.next=7;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](0),void 0!==e.t0.response?Object(m["a"])(e.t0.response.status):Object(m["a"])(1);case 23:case"end":return e.stop()}},e,this,[[0,20]])}));function t(t){return e.apply(this,arguments)}return t}(),getIopGroups:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u["f"])();case 3:for(t=e.sent,n=t.data.msg,this.formItem.iopList=[],a=0,r=n.length;a<r;a++)this.formItem.iopList.push({id:n[a].iopGroupId,name:n[a].iopGroupName});e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),void 0!==e.t0.response?Object(m["a"])(e.t0.response.status):Object(m["a"])(1);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}(),handleDelete:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.tableData[t.index].code;try{this.$Message.success("此页面仅供参考")}catch(n){void 0!==n.response?Object(m["a"])(n.response.status):Object(m["a"])(1)}this.getCodeGroups();case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getCodeGroups:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s["l"])();case 3:for(t=e.sent,n=t.data.msg,console.log(n),this.tableData=[],a=0,r=n.length;a<r;a++)this.tableData.push({id:n[a].id,code:n[a].alarmCode,name:n[a].alarmGroupName,iopId:n[a].iopGroupId,iopName:n[a].alarmGroupName,msg:n[a].alarmMsg,level:String(n[a].level),timeLimit:n[a].timeLimit});e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),void 0!==e.t0.response?Object(m["a"])(e.t0.response.status):Object(m["a"])(1);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));function t(){return e.apply(this,arguments)}return t}(),showAddCodeGroup:function(){this.handleCodeGroup=!0},handleCancel:function(){this.handleCodeGroup=!1,this.formItem={isAdd:!0,name:"",iopId:"",iops:[],iopList:[],codeList:[],item:[],msg:"",level:"",timeLimit:""},this.getIopGroups()},handleSubmit:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n,a,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(t=this,n=this.formItem,n.name,n.id,a=n.item,n.msg,n.level,n.timeLimit,r=0,o=a.length;r<o;r++)this.formItem.iops=this.formItem.iops.concat(a[r].iop);this.formItem.iops;try{t.$Message.success("此页面仅供参考")}catch(i){void 0!==i.response?Object(m["a"])(i.response.status):Object(m["a"])(1)}this.getCodeGroups(),this.handleCancel();case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),exportExcel:function(){this.$refs.tables.exportCsv({filename:"table-".concat((new Date).valueOf(),".csv")})}},beforeMount:function(){this.getCodeGroups(),this.getIopGroups()}},l=c,p=(n("0b4a"),n("2877")),d=Object(p["a"])(l,a,r,!1,null,"03dd1dbf",null);t["default"]=d.exports}}]);