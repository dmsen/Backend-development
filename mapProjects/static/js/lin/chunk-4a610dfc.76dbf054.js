(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a610dfc"],{"5bdb":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",{attrs:{"dis-hover":!0}},[a("tables",{ref:"tables",attrs:{border:"","disabled-hover":!0,editable:"",searchable:"","search-place":"top",columns:e.columns},on:{"on-delete":e.handleDelete},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}}),a("Row",{staticStyle:{"margin-top":"16px"}},[a("Col",{attrs:{span:"3"}},[a("Button",{staticStyle:{margin:"10px 0"},attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出为Csv文件")])],1),a("Col",{attrs:{span:"5"}},[a("Button",{staticStyle:{margin:"10px 0 10px 5px"},attrs:{type:"default"},on:{click:e.showAddScheme}},[e._v("增加解决方案")])],1),a("Col",{attrs:{span:"10",offset:"6"}},[a("Page",{attrs:{total:e.dataLength,current:e.currentPages,size:"small","show-elevator":"","page-size":10,"show-total":""},on:{"on-change":e.changePages}})],1)],1),e.handleScheme?a("Card",{attrs:{"dis-hover":!0}},[a("Row",[a("i-col",{attrs:{span:"17"}},[a("Form",{ref:"formItem",staticClass:"form",attrs:{model:e.formItem,"label-width":130}},[a("FormItem",{attrs:{label:"解决方案名称",prop:"name"}},[a("Input",{staticStyle:{width:"auto"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1),a("FormItem",{attrs:{label:"解决方案详情",prop:"detail"}},[a("Input",{staticStyle:{width:"auto"},model:{value:e.formItem.detail,callback:function(t){e.$set(e.formItem,"detail",t)},expression:"formItem.detail"}})],1),a("FormItem",{attrs:{label:"适用异常码/组合码"}},[a("Select",{staticStyle:{width:"auto"},attrs:{multiple:""},model:{value:e.formItem.codes,callback:function(t){e.$set(e.formItem,"codes",t)},expression:"formItem.codes"}},e._l(e.formItem.list,function(t,s){return a("Option",{key:s,attrs:{value:t.name}},[e._v(e._s(t.name))])}),1)],1),a("Button",{staticStyle:{margin:"10px 0 10px 100px"},attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确认提交")]),a("Button",{staticStyle:{margin:"10px 0 10px 5px"},attrs:{type:"default"},on:{click:e.handleCancel}},[e._v("取消")])],1)],1)],1)],1):e._e()],1)},n=[],r=(a("7f7f"),a("96cf"),a("3b8d")),o=a("fa69"),i=a("9e04"),c=a("365c"),l={components:{Tables:o["a"]},data:function(){var e=this;return{dataLength:0,currentPages:1,handleScheme:!1,formItem:{isAdd:!0,id:"",name:"",detail:"",list:[],codes:[]},columns:[{title:"名称",key:"name"},{title:"描述",key:"detail"},{title:"适用异常码/组合码",key:"list"},{title:"操作",key:"handle",searchable:!1,button:[function(t,a,s){return t("div",[t("Button",{props:{type:"success",size:"small"},style:{marginRight:"10px"},on:{click:function(){e.handleChoose(a)}}},"选择"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"10px"},on:{click:function(){e.showChangeScheme(a)}}},"修改"),t("Poptip",{props:{confirm:!0,title:"你确定要删除吗?"},style:{marginLeft:"-5px"},on:{"on-ok":function(){s.$emit("on-delete",a),s.$emit("input",a.tableData.filter(function(e,t){return t!==a.row.initRowIndex}))}}},[t("Button",{props:{type:"error",size:"small"}},"删除")])])}]}],tableData:[]}},methods:{changePages:function(e){this.currentPages=e,this.getScheme()},handleDelete:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,s,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=this,s=this.tableData[t.index].id,e.prev=2,e.next=5,Object(i["i"])({id:s});case 5:n=e.sent,1===n.data.result?a.$Message.error(n.data.msg):a.$Message.success("删除成功"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),void 0!==e.t0.response?Object(c["a"])(e.t0.response.status):Object(c["a"])(1);case 12:this.getScheme();case 13:case"end":return e.stop()}},e,this,[[2,9]])}));function t(t){return e.apply(this,arguments)}return t}(),getScheme:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=this.currentPages,e.next=4,Object(i["p"])(t);case 4:for(a=e.sent,console.log(a),this.dataLength=a.data.allDateLength,this.tableData=[],s=0,n=a.data.msg.length;s<n;s++)this.tableData.push({id:a.data.msg[s].alarmSolutonId,name:a.data.msg[s].alarmSolutonName,detail:a.data.msg[s].alarmSolutonDetail,list:a.data.msg[s].alarmCodeList});e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),void 0!==e.t0.response?Object(c["a"])(e.t0.response.status):Object(c["a"])(1);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));function t(){return e.apply(this,arguments)}return t}(),getCode:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s,n,r,o,l,m;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i["m"])();case 3:for(t=e.sent,a=t.data.msg,this.formItem.list=[],s=0,n=a.length;s<n;s++)this.formItem.list.push({code:a[s].alarmCode,name:a[s].alarmName});return e.next=9,Object(i["l"])();case 9:for(r=e.sent,o=r.data.msg,l=0,m=o.length;l<m;l++)this.formItem.list.push({code:o[l].alarmCode,name:o[l].alarmGroupName});e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),void 0!==e.t0.response?Object(c["a"])(e.t0.response.status):Object(c["a"])(1);case 17:case"end":return e.stop()}},e,this,[[0,14]])}));function t(){return e.apply(this,arguments)}return t}(),showAddScheme:function(){this.handleScheme=!0},showChangeScheme:function(e){this.formItem.isAdd=!1;var t=this.tableData[e.index],a=t.id,s=t.detail,n=t.name;t.list;this.formItem.name=n,this.formItem.id=a,this.formItem.detail=s,this.handleScheme=!0},handleCancel:function(){this.handleScheme=!1,this.formItem={isAdd:!0,id:"",name:"",detail:"",list:[]},this.getCode()},handleSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,s,n,r,o,l,m,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,a=this.formItem,s=a.isAdd,n=a.id,r=a.detail,o=a.name,l=a.codes,e.prev=2,!s){e.next=10;break}return e.next=6,Object(i["e"])({detail:r,name:o,codes:l});case 6:m=e.sent,0===m.data.result?t.$Message.success("添加成功"):t.$Message.error(m.data.msg),e.next=14;break;case 10:return e.next=12,Object(i["g"])({id:n,detail:r,name:o,codes:l});case 12:u=e.sent,0===u.data.result?t.$Message.success("修改成功"):t.$Message.error(u.data.msg);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](2),void 0!==e.t0.response?Object(c["a"])(e.t0.response.status):Object(c["a"])(1);case 19:this.getScheme(),this.handleCancel();case 21:case"end":return e.stop()}},e,this,[[2,16]])}));function t(){return e.apply(this,arguments)}return t}(),handleChoose:function(e){this.$store.commit("setSolution",this.tableData[e.index]),this.$store.commit("setCurrent",2),this.$router.push("/alarm/process")},exportExcel:function(){this.$refs.tables.exportCsv({filename:"table-".concat((new Date).valueOf(),".csv")})}},beforeMount:function(){this.getScheme(),this.getCode()}},m=l,u=(a("e5c1"),a("2877")),d=Object(u["a"])(m,s,n,!1,null,"58c7832b",null);t["default"]=d.exports},"8f5c":function(e,t,a){},e5c1:function(e,t,a){"use strict";var s=a("8f5c"),n=a.n(s);n.a}}]);