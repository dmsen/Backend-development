(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-647214dc"],{"191d":function(e,t,a){},"42c2":function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return o}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return s}),a.d(t,"h",function(){return m}),a.d(t,"i",function(){return c}),a.d(t,"f",function(){return d}),a.d(t,"g",function(){return u}),a.d(t,"e",function(){return l});a("7f7f");var n=a("66df"),r=function(e){var t=e.macId,a=e.gwId,r=(e.iop,e.name),o=e.minRange,i=e.maxRange,s=e.aline,m=e.computedWay;return n["a"].request({url:"gwIopMappingConfig/add",data:{machineId:t,gwId:a,physicalName:r,minLC:o,maxLC:i,aline:s,method:m},method:"post"})},o=function(e){var t=e.id,a=e.gwId,r=e.macId,o=(e.name,e.minRange),i=e.maxRange,s=e.aline,m=e.computedWay;return n["a"].request({url:"gwIopMappingConfig/mod",data:{configId:t,machineId:r,gwId:a,minLC:o,maxLC:i,aline:s,method:m},method:"put"})},i=function(e){var t=e.id;return n["a"].request({url:"gwIopMappingConfig/del",method:"delete",data:{configId:t}})},s=function(e){return n["a"].request({url:"/gwIopMappingConfig/gwIopMappingConfigs",method:"post",data:{sendPage:e}})},m=function(){return n["a"].request({url:"/gwIop/gateways/notUsed",method:"get"})},c=function(e){var t=e.gw;return n["a"].request({url:"/gwIop/iops/notUsed/"+t,method:"get"})},d=function(){return n["a"].request({url:"/iopGroup/iopGroups",method:"get"})},u=function(e){var t=e.id;return n["a"].request({url:"/iopGroup/iops/"+t,method:"get"})},l=function(e){var t=e.id;return n["a"].request({url:"machineIdIOP/get",method:"post",data:{machineId:t}})}},4307:function(e,t,a){"use strict";var n=a("191d"),r=a.n(n);r.a},c9b8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",{attrs:{"dis-hover":!0}},[a("tables",{ref:"tables",attrs:{border:"","disabled-hover":!0,editable:"",searchable:"","search-place":"top",columns:e.columns},on:{"on-delete":e.handleDelete},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}}),a("Row",{staticStyle:{"margin-top":"16px"}},[a("Col",{attrs:{span:"3"}},[a("Button",{staticStyle:{margin:"10px 0"},attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出为Csv文件")])],1),a("Col",{attrs:{span:"5"}},[a("Button",{staticStyle:{margin:"10px 0 10px 5px"},attrs:{type:"default"},on:{click:e.showAddCode}},[e._v("增加异常码")])],1),a("Col",{attrs:{span:"10",offset:"6"}},[a("Page",{attrs:{total:e.dataLength,current:e.currentPages,size:"small","show-elevator":"","page-size":10,"show-total":""},on:{"on-change":e.changePages}})],1)],1),e.handleCode?a("Card",{attrs:{"dis-hover":!0}},[a("Row",[a("i-col",{attrs:{span:"17"}},[a("Form",{ref:"formItem",staticClass:"form",attrs:{model:e.formItem,"label-width":80}},[a("FormItem",{attrs:{label:"异常码",prop:"code"}},[a("Input",{staticStyle:{width:"auto"},attrs:{disabled:!e.formItem.isAdd},model:{value:e.formItem.code,callback:function(t){e.$set(e.formItem,"code",t)},expression:"formItem.code"}})],1),a("FormItem",{attrs:{label:"异常码名",prop:"name"}},[a("Input",{staticStyle:{width:"auto"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1),a("FormItem",{attrs:{label:"选择设备",prop:"macId"}},[a("Select",{staticStyle:{width:"auto"},on:{"on-change":e.handleChooseMac},model:{value:e.formItem.macId,callback:function(t){e.$set(e.formItem,"macId",t)},expression:"formItem.macId"}},e._l(e.formItem.macList,function(t,n){return a("Option",{key:n,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1),a("FormItem",{attrs:{label:"选择监测点",prop:"iopId"}},[a("Select",{staticStyle:{width:"auto"},model:{value:e.formItem.iopId,callback:function(t){e.$set(e.formItem,"iopId",t)},expression:"formItem.iopId"}},e._l(e.formItem.iopList,function(t,n){return a("Option",{key:n,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1),a("FormItem",{attrs:{label:"最小值",prop:"min"}},[a("Input",{staticStyle:{width:"auto"},model:{value:e.formItem.min,callback:function(t){e.$set(e.formItem,"min",t)},expression:"formItem.min"}})],1),a("FormItem",{attrs:{label:"最大值",prop:"max"}},[a("Input",{staticStyle:{width:"auto"},model:{value:e.formItem.max,callback:function(t){e.$set(e.formItem,"max",t)},expression:"formItem.max"}})],1),a("FormItem",{attrs:{label:"异常消息",prop:"msg"}},[a("Input",{staticStyle:{width:"auto"},model:{value:e.formItem.msg,callback:function(t){e.$set(e.formItem,"msg",t)},expression:"formItem.msg"}})],1),a("FormItem",{attrs:{label:"异常等级",prop:"level"}},[a("Select",{staticStyle:{width:"auto"},model:{value:e.formItem.level,callback:function(t){e.$set(e.formItem,"level",t)},expression:"formItem.level"}},[a("Option",{attrs:{value:1}},[e._v("1")]),a("Option",{attrs:{value:2}},[e._v("2")]),a("Option",{attrs:{value:3}},[e._v("3")])],1)],1),a("FormItem",{attrs:{label:"时延",prop:"timeLimit"}},[a("Input",{staticStyle:{width:"auto"},model:{value:e.formItem.timeLimit,callback:function(t){e.$set(e.formItem,"timeLimit",t)},expression:"formItem.timeLimit"}})],1),a("Button",{staticStyle:{margin:"10px 0 10px 100px"},attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确认提交")]),a("Button",{staticStyle:{margin:"10px 0 10px 5px"},attrs:{type:"default"},on:{click:e.handleCancel}},[e._v("取消")])],1)],1)],1)],1):e._e()],1)},r=[],o=(a("7f7f"),a("96cf"),a("3b8d")),i=a("fa69"),s=a("9e04"),m=a("42c2"),c=a("365c"),d=a("f564"),u={components:{Tables:i["a"]},data:function(){var e=this;return{dataLength:0,currentPages:1,handleCode:!1,formItem:{isAdd:!0,id:"",code:"",name:"",macId:"",macName:"",macList:[],iopId:"",iopList:[],min:"",max:"",level:"",msg:"",timeLimit:""},columns:[{title:"异常码",key:"code"},{title:"异常码名",key:"name"},{title:"设备名",key:"macName"},{title:"监控点名",key:"iopName"},{title:"最小值",key:"min"},{title:"最大值",key:"max"},{title:"异常消息",key:"msg"},{title:"异常等级",key:"level"},{title:"时延",key:"timeLimit"},{title:"操作",key:"handle",searchable:!1,button:[function(t,a,n){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"10px"},on:{click:function(){e.showChangeCode(a)}}},"修改"),t("Poptip",{props:{confirm:!0,title:"你确定要删除吗?"},style:{marginLeft:"-5px"},on:{"on-ok":function(){n.$emit("on-delete",a),n.$emit("input",a.tableData.filter(function(e,t){return t!==a.row.initRowIndex}))}}},[t("Button",{props:{type:"error",size:"small"}},"删除")])])}]}],tableData:[]}},methods:{changePages:function(e){this.currentPages=e,this.getCodes()},getMacs:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d["h"])();case 3:for(t=e.sent,a=t.data.msg,console.log(a),this.formItem.macList=[],n=0,r=a.length;n<r;n++)this.formItem.macList.push({id:a[n].machineId,name:a[n].machineName});e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),void 0!==e.t0.response?Object(c["a"])(e.t0.response.status):Object(c["a"])(1);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));function t(){return e.apply(this,arguments)}return t}(),getIops:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m["e"])({id:t});case 3:for(a=e.sent,n=a.data.msg,this.formItem.iopList=[],r=0,o=n.length;r<o;r++)this.formItem.iopList.push({id:n[r].id,name:n[r].physicalName});e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),void 0!==e.t0.response?Object(c["a"])(e.t0.response.status):Object(c["a"])(1);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));function t(t){return e.apply(this,arguments)}return t}(),handleDelete:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=this,n=this.tableData[t.index].code,e.prev=2,e.next=5,Object(s["h"])({id:n});case 5:r=e.sent,1===r.data.result?a.$Message.error(r.data.msg):a.$Message.success("删除成功"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),void 0!==e.t0.response?Object(c["a"])(e.t0.response.status):Object(c["a"])(1);case 12:this.getCodes();case 13:case"end":return e.stop()}},e,this,[[2,9]])}));function t(t){return e.apply(this,arguments)}return t}(),getCodes:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=this.currentPages,e.next=4,Object(s["m"])(t);case 4:for(a=e.sent,console.log(a),this.tableData=[],this.dataLength=a.data.allDateLength,n=0,r=a.data.msg.length;n<r;n++)this.tableData.push({code:a.data.msg[n].alarmCode,name:a.data.msg[n].alarmName,macName:a.data.msg[n].machineName,iopName:a.data.msg[n].physicalName,min:a.data.msg[n].valueMin,max:a.data.msg[n].valueMax,msg:a.data.msg[n].alarmMsg,level:a.data.msg[n].level,timeLimit:a.data.msg[n].timeLimit});e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),void 0!==e.t0.response?Object(c["a"])(e.t0.response.status):Object(c["a"])(1);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));function t(){return e.apply(this,arguments)}return t}(),handleChooseMac:function(e){this.getIops(e)},showAddCode:function(){this.handleCode=!0},showChangeCode:function(e){this.formItem.isAdd=!1;var t=this.tableData[e.index],a=t.code,n=t.name,r=t.macName,o=t.iopName,i=t.min,s=t.max,m=t.msg,c=t.level,d=t.timeLimit;this.formItem.name=n,this.formItem.id=a,this.formItem.macId=r,this.formItem.iopId=o,this.formItem.min=i,this.formItem.max=s,this.formItem.level=c,this.formItem.msg=m,this.formItem.timeLimit=d,this.handleCode=!0},handleCancel:function(){this.handleCode=!1,this.formItem={isAdd:!0,id:"",code:"",name:"",macId:"",macList:[],iopId:"",iopList:[],min:"",max:"",level:"",msg:"",timeLimit:""},this.getMacs()},handleSubmit:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r,o,i,m,d,u,l,p,f,h,g,I;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,a=this.formItem,n=a.isAdd,r=a.id,o=a.code,i=a.name,m=a.iopId,d=a.min,u=a.max,l=a.msg,p=a.level,f=a.timeLimit,h=a.macId,e.prev=2,!n){e.next=11;break}return e.next=6,Object(s["b"])({code:o,name:i,macId:h,iopId:m,min:d,max:u,msg:l,level:p,timeLimit:f});case 6:g=e.sent,console.log(g),0===g.data.result?t.$Message.success("添加成功"):t.$Message.error(g.data.msg),e.next=15;break;case 11:return e.next=13,Object(s["f"])({id:r,name:i,macId:h,iopId:m,min:d,max:u,msg:l,level:p,timeLimit:f});case 13:I=e.sent,0===I.data.result?t.$Message.success("修改成功"):t.$Message.error(I.data.msg);case 15:e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](2),console.log(e.t0),void 0!==e.t0.response?Object(c["a"])(e.t0.response.status):Object(c["a"])(1);case 21:this.getCodes(),this.handleCancel();case 23:case"end":return e.stop()}},e,this,[[2,17]])}));function t(){return e.apply(this,arguments)}return t}(),exportExcel:function(){this.$refs.tables.exportCsv({filename:"table-".concat((new Date).valueOf(),".csv")})}},beforeMount:function(){this.getCodes(),this.getMacs()}},l=u,p=(a("4307"),a("2877")),f=Object(p["a"])(l,n,r,!1,null,"fda428ec",null);t["default"]=f.exports},f564:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"c",function(){return o}),a.d(t,"e",function(){return i}),a.d(t,"g",function(){return s}),a.d(t,"b",function(){return m}),a.d(t,"d",function(){return c}),a.d(t,"f",function(){return d}),a.d(t,"h",function(){return u});a("7f7f");var n=a("66df"),r=function(e){var t=e.name,a=e.detail;return n["a"].request({url:"/machType/add",data:{machTypeName:t,machTypeDesc:a},method:"post"})},o=function(e){var t=e.id,a=e.name,r=e.detail;return n["a"].request({url:"/machType/mode",data:{machTypeId:t,machTypeName:a,machTypeDesc:r},method:"post"})},i=function(e){var t=e.id;return n["a"].request({url:"/machType/del",data:{machTypeId:t},method:"post"})},s=function(e){return n["a"].request({url:"/machType/machTypes",method:"post",data:{sendPage:e}})},m=function(e){var t=e.name,a=e.code,r=e.desc,o=e.date,i=e.customer,s=e.office;return n["a"].request({url:"machine/add",data:{machineName:t,machTypeId:a,machineDesc:r,dateOfProduct:o,customerId:i,office:s},method:"post"})},c=function(e){var t=e.name,a=e.id,r=e.code,o=e.desc,i=e.date,s=e.customer,m=e.office;return n["a"].request({url:"machine/mode",data:{machineId:a,machineName:t,machTypeId:r,machineDesc:o,dateOfProduct:i,customerId:s,office:m},method:"put"})},d=function(e){var t=e.id;return n["a"].request({url:"machine/del",method:"delete",data:{machineId:t}})},u=function(e){return n["a"].request({url:"/machine/machines",method:"post",data:{sendPage:e}})}}}]);