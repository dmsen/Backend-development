(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dbd3a64"],{"0c5d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",{staticClass:"headerCard",attrs:{"dis-hover":!0}},[a("Tabs",{attrs:{value:e.tabCodes},on:{"on-click":e.handleTab}},[a("TabPane",{attrs:{label:"单个码异常",name:"code"}}),a("TabPane",{attrs:{label:"组合码异常",name:"codes"}})],1)],1),e.showCode?e._e():a("Card",{attrs:{"dis-hover":!0}},[a("tables",{ref:"tables",attrs:{border:"","disabled-hover":!0,editable:"",searchable:"","search-place":"top",columns:e.column},model:{value:e.table,callback:function(t){e.table=t},expression:"table"}})],1),e.showCode?e._e():a("Card",[a("Rate",{attrs:{value:1,count:1,character:"仅供参考"}})],1),e.showCode?a("Card",{attrs:{"dis-hover":!0}},[a("Select",{attrs:{placeholder:"请选择机器"},on:{"on-change":e.handleSearch},model:{value:e.equipmentId,callback:function(t){e.equipmentId=t},expression:"equipmentId"}},e._l(e.equipmentList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1),a("tables",{ref:"tables",attrs:{border:"","disabled-hover":!0,editable:"",searchable:"","search-place":"top",columns:e.columns},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}}),a("Row",{staticStyle:{"margin-top":"16px"}},[a("Col",{attrs:{span:"3"}},[a("Button",{staticStyle:{margin:"10px 0"},attrs:{type:"primary"},on:{click:e.initAlarm}},[e._v("初始化异常记录")])],1),a("Col",{attrs:{span:"10",offset:"11"}},[a("Page",{attrs:{total:e.dataLength,current:e.currentPages,size:"small","show-elevator":"","page-size":10,"show-total":""},on:{"on-change":e.changePages}})],1)],1)],1):e._e()],1)},r=[],n=(a("96cf"),a("3b8d")),c=a("fa69"),o=a("f564"),i=a("9e04"),u=a("365c"),d=a("90de"),l={components:{Tables:c["a"]},data:function(){var e=this;return{tabCodes:"code",dataLength:0,currentPages:1,showCode:!0,equipmentId:"",equipmentList:[],columns:[{title:"设备名称",key:"macName"},{title:"监测点名称",key:"iopName"},{title:"异常码",key:"code"},{title:"异常码名称",key:"codeName"},{title:"异常消息",key:"codeMsg"},{title:"开始时间",key:"sDate"},{title:"持续时间",key:"duration"},{title:"严重级别",key:"level"},{title:"异常记录状态",key:"status",render:function(e,t){var a=t.row,s=0===a.status?"default":2===a.status?"primary":"success",r=0===a.status?"未处理":2===a.status?"处理中":"已处理";return e("Tag",{props:{type:"dot",color:s},style:{marginLeft:"-5px"}},r)}},{title:"操作",key:"handle",searchable:!1,button:[function(t,a,s){return t("div",[t("Button",{props:{type:"success",size:"small"},style:{marginRight:"10px"},on:{click:function(){e.handleChoose(a)}}},"选择")])}]}],tableData:[],column:[{title:"监测点组名称",key:"iopName"},{title:"异常码",key:"code"},{title:"组合码名称",key:"codeName"},{title:"异常消息",key:"codeMsg"},{title:"开始时间",key:"sDate"},{title:"持续时间",key:"duration"},{title:"严重级别",key:"level"},{title:"异常记录状态",key:"status",render:function(e,t){var a=t.row,s=0===a.status?"default":2===a.status?"primary":"success",r=0===a.status?"未处理":2===a.status?"处理中":"已处理";return e("Tag",{props:{type:"dot",color:s},style:{marginLeft:"-5px"}},r)}},{title:"操作",key:"handle",searchable:!1,button:[function(t,a,s){return t("div",[t("Button",{props:{type:"success",size:"small"},on:{click:function(){e.handleChooseGroup(a)}}},"选择")])}]}],table:[]}},methods:{initAlarm:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,!this.equipmentId){e.next=14;break}return e.prev=2,e.next=5,Object(i["q"])();case 5:a=e.sent,0===a.data.result?(t.$Message.success(a.data.msg),t.handleSearch()):t.$Message.error(a.data.msg),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),void 0!==e.t0.response?Object(u["a"])(e.t0.response.status):Object(u["a"])(1);case 12:e.next=24;break;case 14:return e.prev=14,e.next=17,Object(i["q"])();case 17:s=e.sent,0===s.data.result?t.$Message.success(s.data.msg):t.$Message.error(s.data.msg),e.next=24;break;case 21:e.prev=21,e.t1=e["catch"](14),void 0!==e.t1.response?Object(u["a"])(e.t1.response.status):Object(u["a"])(1);case 24:case"end":return e.stop()}},e,this,[[2,9],[14,21]])}));function t(){return e.apply(this,arguments)}return t}(),changePages:function(e){this.currentPages=e,"code"===this.tabCodes?this.handleSearch():this.$Message.error("此功能无")},getMachines:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,s,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o["h"])();case 3:for(t=e.sent,a=t.data.msg,s=0,r=a.length;s<r;s++)this.equipmentList.push({name:a[s].machineName,id:a[s].machineId});e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),void 0!==e.t0.response?Object(u["a"])(e.t0.response.status):Object(u["a"])(1);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),handleSearch:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,s,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=this.currentPages,a=this.equipmentId,e.next=5,Object(i["o"])({id:a,sendPage:t});case 5:for(s=e.sent,this.dataLength=s.data.allDateLength,this.tableData=[],r=0,n=s.data.msg.length;r<n;r++)this.tableData.push({id:s.data.msg[r].alarmId,macId:s.data.msg[r].machineId,macName:s.data.msg[r].machineName,iopName:s.data.msg[r].physicalName,code:s.data.msg[r].alarmCode,codeName:s.data.msg[r].alarmName,codeMsg:s.data.msg[r].alarmMsg,sDate:Object(d["g"])(s.data.msg[r].startTime,"year"),duration:s.data.msg[r].duration,level:s.data.msg[r].level,status:s.data.msg[r].status});e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),void 0!==e.t0.response?Object(u["a"])(e.t0.response.status):Object(u["a"])(1);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));function t(){return e.apply(this,arguments)}return t}(),getGroupRecord:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,s,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i["n"])();case 3:for(t=e.sent,a=t.data.msg,this.table=[],s=0,r=a.length;s<r;s++)this.table.push({id:a[s].multiAlarmId,iopName:a[s].iopGroupName,code:a[s].alarmCode,codeName:a[s].alarmGroupName,codeMsg:a[s].alarmMsg,sDate:a[s].startTime,duration:a[s].duration,level:a[s].level,status:a[s].status});e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),void 0!==e.t0.response?Object(u["a"])(e.t0.response.status):Object(u["a"])(1);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}(),handleChoose:function(e){console.log(this.tableData[e.index]),this.$store.commit("setRecord",this.tableData[e.index]),this.$store.commit("setCurrent",1),this.$router.push("/alarm/process")},handleChooseGroup:function(e){this.$store.commit("setRecordGroup",this.tableData[e.index]),this.$store.commit("setCurrent",1),this.$router.push("/alarm/process")},handleTab:function(e){"code"===e?this.showCode=!0:(this.$Message.error("此功能无"),this.showCode=!1)}},beforeMount:function(){this.getMachines()}},m=l,h=(a("d409"),a("2877")),p=Object(h["a"])(m,s,r,!1,null,"025109e0",null);t["default"]=p.exports},cbc6:function(e,t,a){},d409:function(e,t,a){"use strict";var s=a("cbc6"),r=a.n(s);r.a},f564:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"c",function(){return n}),a.d(t,"e",function(){return c}),a.d(t,"g",function(){return o}),a.d(t,"b",function(){return i}),a.d(t,"d",function(){return u}),a.d(t,"f",function(){return d}),a.d(t,"h",function(){return l});a("7f7f");var s=a("66df"),r=function(e){var t=e.name,a=e.detail;return s["a"].request({url:"/machType/add",data:{machTypeName:t,machTypeDesc:a},method:"post"})},n=function(e){var t=e.id,a=e.name,r=e.detail;return s["a"].request({url:"/machType/mode",data:{machTypeId:t,machTypeName:a,machTypeDesc:r},method:"post"})},c=function(e){var t=e.id;return s["a"].request({url:"/machType/del",data:{machTypeId:t},method:"post"})},o=function(e){return s["a"].request({url:"/machType/machTypes",method:"post",data:{sendPage:e}})},i=function(e){var t=e.name,a=e.code,r=e.desc,n=e.date,c=e.customer,o=e.office;return s["a"].request({url:"machine/add",data:{machineName:t,machTypeId:a,machineDesc:r,dateOfProduct:n,customerId:c,office:o},method:"post"})},u=function(e){var t=e.name,a=e.id,r=e.code,n=e.desc,c=e.date,o=e.customer,i=e.office;return s["a"].request({url:"machine/mode",data:{machineId:a,machineName:t,machTypeId:r,machineDesc:n,dateOfProduct:c,customerId:o,office:i},method:"put"})},d=function(e){var t=e.id;return s["a"].request({url:"machine/del",method:"delete",data:{machineId:t}})},l=function(e){return s["a"].request({url:"/machine/machines",method:"post",data:{sendPage:e}})}}}]);